#include <stdio.h>
#include <stdlib.h>
#include "lowertext.h"
#include "rmstopwords.h"
#include "uniquekw.h"
#include "wordstats.h"
#include "createstring.h"
#include "copypastestring.h"
#include "strippunc.h"
#include "quicksort2.h"
#include "intarraycheck.h"

int main () {
	//Stores Text Content
	char *text = (char*)calloc(100000, sizeof(char));
	text = "We’ve recently studied webcam technology and scoured the market for the best webcams for streaming. After considering the opinions of camera experts and photography bloggers, we’ve compiled a post of two amazing webcams. We also analyzed hundreds of reviews from consumers, and found all the benefits and disadvantages of each webcam. And finally, we’ve watched hours of webcam quality tests to determine which webcam provides the best quality for streaming. We have done all this demanding work, and concentrated our hard work into this one amazing post, check out what we think are the best webcams for streaming.    Table of Contents The best webcams for streaming are not for casual users, they’re for people that need to use their webcam frequently. These webcams are also ideal for people that require high quality video for their work or recreation. One of the best uses for these webcams is for streaming on sites like Twitch.tv and Youtube, the high-quality video from these webcams allows for a high definition experience.  Having a facecam during streaming has been shown to increase viewer trust and increase subscriber and follower rates. We know catching facial expressions was important for a streaming webcam, so all our recommendations are 1080p or 720p resolution with a high megapixel count.  We selected these webcams for streaming with two things in mind; Video Control, and Frames Per Second. When choosing the best webcams for streaming it’s important to have total control over all the settings. All streaming environments are a little different, and the default streaming settings will not work well for everyone. Having full control over the webcam allows you to create the best stream quality. For example, being able to adjust brightness, contrast and focus creates the best possible quality footage. Another important criteria we used is frames per second or FPS. Having a high FPS makes the video from a webcam look much smoother. Unfortunately, we were only able to find one webcam that could deliver 60fps. 60fps is quickly becoming standard on online streaming platforms like Twitch.tv and Youtube, as stated before, the advantage of a high FPS is that video looks much smoother.  Our top pick is the Logitech C922x Pro Stream Webcam. This new webcam by Logitech has a plethora of features that make it our recommended choice.  First, the Logitech C922x comes with Logitech’s webcam software that allows for full control over the webcam. This software allows you to manually adjust; focus, Brightness, Contrast, Color Intensity, and White Balance.  These settings give the customization needed to create the perfect streaming experience.  This webcam does both 1080p and 720p video, but the main reason this is our top pick is because it can stream at 60fps. The 60fps setting is locked with the 720p resolution, which means 1080p and 60fps is not possible. Fortunately, many streamers scale down the webcam box, so streaming at 720p shouldn’t degrade quality too much.  There is one really cool software feature that this webcam comes with, and that is background replacement. When you’re streaming a game on a site like Twitch, you want as much game footage as possible on screen. What many streamers end up doing is rigging up a whole green screen system. The background replacement software in this streaming webcam removes the need of a green screen and removes your background using proprietary software.  From Linus Tech Tips on Youtube Last notes, the webcam has a 78-degree field of view, which is pretty decent and allows you to capture everything you’d want to. Logitech has partnered with XSplit, a popular streaming software, and the webcam comes with a 3-month X Split subscription. Most streamers use OBS, so this isn’t really a great offer. Finally, the webcam uses H.264 compression, which is a video encoding technology that is ideal for streaming, because it uses less bandwidth. Basically, you won’t lag your network much when you’re streaming with this webcam.  We highly recommend the Logitech C922x Pro Stream Webcam, it is easily one of the best webcams on the market right now.  Sign up with your email address to receive news and updates. We respect your privacy. Our runner up for the best streaming webcam is the Logitech C920, this webcam is ridiculously popular.  This option is also a great buy, and is in the goldilocks zone for price and performance.  First, the C920 comes with the same software as the C992x and offers full control over; focus, Brightness, Contrast, Color Intensity, and White Balance. All streaming environments are different, so having all this customization ensures you can create the best stream.  The FPS for this webcam is 30fps, this is only half the fps of the C992x so there will be some motion blur. Honestly, Logitech has done a great job at reducing the motion blur, and you will most likely have a smooth streaming experience. The video quality of the webcam is out of this world. This webcam has the same video quality as a standalone camcorder, with crisp video and great color balance.  The webcam can also stream and record at full 1080p and even 720p, if your stream requires a lower resolution. It uses H.264 encoding so your streaming quality will be high while also not bogging down your internet speed. The C920 has the same field of view as the C992X, which is 78-degrees. The C920 also comes with a tripod mount point at the bottom of the webcam, so your webcam isn’t always locked to your monitor.  One stand out feature of this webcam is the glass lens and auto-focus. The webcam features a Carl Zeiss Glass Lens on the front, which allows for high quality and crisp auto-focus. The auto-focus for the C920 does a great job at keeping everything in focus, it is quick and responsive. The focus allows the webcam to deliver crisp video at all times.  Final notes, if you can’t afford our top pick then this is the best second choice. The price to performance ratio for this webcam cannot be beaten, and that is the reason it is a top seller on Amazon. The foldable joints let you stream at whatever angles you’d like. One downside about this camera is that it has no swivel feature, so you can’t turn the webcam side to side. But the large field of view compensates for this. It comes with a 6ft usb cable, so you can go quite far away from your desktop.  If you plan on buying one of these streaming webcams, consider buying some of the following accessories. A webcam by itself is not perfect and having the follow add-ons will ensure a great streaming experience.  Separate microphone Both of our recommend webcams have dual microphones, and this is fine for casual webcam users. The downside of the included microphones is that they produce this booming sound quality. Overall, the audio quality from these webcams is unpleasant to listen to. Having high sound quality while streaming is almost as important as video quality, so consider getting a dedicated microphone for streaming. We made a post awhile ago about the best microphones for Youtube. You can click on the link below to go to that post. A good microphone is pricey, if you can’t afford one, you should hold out and save.  Buying a microphone for youtube is usually a pretty big investment. If you're serious about Twitch streaming or youtube then you need a microphone that will last you a long time. The best microphone for youtube will have to have solid build quality, and proven track record. This means that the microphone will have a well built body and quality parts inside the microphone and outside. It's also important that the best microphone for youtube has been used by many people, because this ensures that it has a long and well received history. If the microphone has lasted others a long time than it will last you a long time too.  LED Face Light Both webcams have great auto-brightness and light sensors. But nothing beats real light in a room.  Lighting plays a big factor in how good you look on camera, if your lighting is bad, you will look bad. The software with these cameras is great, but software can only do so much for bad lighting. If it’s important for you to look good on webcam, consider getting a separate light source in your room. We recommend a ring light to equally light up your face, and you can get that cool ring in your eye too.  Privacy Shield You don’t want to be streaming 24/7 so consider getting a privacy shield to protect yourself. Webcams are usually in places that are private and with new hacks coming out everyday, you should invest in a privacy shield.  Webcam Mount Our recommended webcams are made to mount onto a monitor or laptop screen, but sometimes you may need a webcam somewhere else. Fortunately, both of our webcams come with a universal mount point in the bottom, this means you can buy pretty much any tripod and it will fit on your webcam. First of all, thanks for reading all the way through. We worked hard and researched dozens of webcams to find the best for you. In our opinion, the best webcam you can buy for streaming is the Logitech C992x, it delivers high frame per second video and provides you with high quality video. If you don’t want to spend the money for the pricey C992x, then we recommend its little brother, the Logitech C920. It delivers the same high-quality video quality, but with half the FPS.  When it comes to stream, the CPU is easily the most important part. Streaming to Twitch requires encoding, and this done with the CPU. Another important thing to remember is that you want to make the job of your CPU as easy as possible, and this done by ending background tasks and having a dedicated graphics card. The graphics cards take the load off of your CPU if you have integrated graphics, and allows the CPU more overhead.";
	
	//Returns copy of main text with all lower case!!!!
	char *lowered = (char*)calloc(100000, sizeof(char));
	lowered = lowercase(text, lowered);

	//Removes punc!!!!
	char *puncfree = (char*)calloc(100000, sizeof(char));
	puncfree = strippunc(lowered, puncfree);

	//Removes stopwords from lowercased string!!!!!
	char *clean = (char*)calloc(100000, sizeof(char));
	clean = cleantext(puncfree, clean);
	free(lowered);
	
	//Returns string with unique words only!!!
	char *uwords = (char*)calloc(100000, sizeof(char));
	uwords = uniquestrings(clean, uwords);
	free(clean);

	//Ranking words from most common to least common
	struct wordvalue {
		int count;
		char word[100];
	};
	long int numwords = wordcount(uwords) + 1;
	struct wordvalue main[numwords];

	int i;
	int start = 0;
	int end;

	int inc_words = 0;
	
	int passed = 0;
	char *tempword = (char*)calloc(100, sizeof(char));
	int values[numwords];

	//Goes through string of unique words, and counts occurences 
	for(i = 0; i < numwords; i++) {

		if (uwords[i] != ' ') {
		} else {

		  end = i - 1;
		  start = start;
		  tempword = makestring(start, end, uwords);
		  int occ = (int)findpattern(puncfree, tempword);

		  if (occ >= 2) {
		  	transferstring(tempword, main[inc_words].word, 0);
		    main[inc_words].count = occ;
		    if (arraycheck(values, occ, passed) == 0)
		    {
		    	values[passed] = occ;
		    	++passed;
		    }
		    //Only increments if passed test
		    inc_words = inc_words + 1;
		  };
		  start = i + 1;
		}
	};

	free(puncfree);
	free(uwords);

	//Makes sure first word in string most freq
	quicksort(values, 0, passed);

	char *keywordorder = (char*)calloc(1000, sizeof(char));

	int lastindex = 0;

	for (i = 0; i < passed; i++) {
		for (int j = 0; j < inc_words - 1; ++j)
		{
			if (values[i] == main[j].count)
			{
				transferstring(main[j].word, keywordorder, lastindex);
				lastindex = lastindex + (strlen(main[j].word));
			};
		};
	};

	printf("\n%s\n", keywordorder);
	return 0;
}